### å¯¼è¯»
åœ¨ä¸Šä¸€ç¯‡æ–‡ç« [\[å‰ç«¯æ¼«è°ˆ\]ä¸€å·´æŒæ‹å¹³Gitä¸­çš„å„ç§æ¦‚å¿µ](https://juejin.im/post/5c395796518825261e1f012a)ä¸­ï¼Œæè¿°äº† Git çš„ä¸€äº›æ¦‚å¿µï¼Œä½†æ˜¯å¤ªè¿‡è™šåŒ–ï¼Œæè¿°çš„éƒ½æ˜¯ä¸€äº›æ¦‚å¿µå’Œå‘½ä»¤ã€‚è¿™ç¯‡æ–‡ç« ç»“åˆå®é™…åœºæ™¯ï¼Œä¸»è¦æè¿°æˆ‘åœ¨é¡¹ç›®å®è·µä¸­ä½¿ç”¨ `Git` ç®¡ç†é¡¹ç›®ã€å›¢é˜Ÿåä½œçš„ä¸€äº›ç»éªŒã€‚åŒ…æ‹¬  1ï¼‰`merge` å’Œ `rebase` ä½¿ç”¨çš„åŒºåˆ«å’Œé€‰æ‹©ï¼›2ï¼‰å¤šäººå›¢é˜Ÿåˆä½œå¼€å‘æµç¨‹ï¼›3ï¼‰æ ‡å‡†åŒ– `commit message`ï¼›4ï¼‰`commit` ç²¾ç»†åŒ–ç®¡ç†ç­‰ã€‚è¿™äº›éƒ½æ˜¯ä¸ºé¡¹ç›®çš„å¥å£®å‘å±•å’Œä»£ç çš„ç²¾ç»†ç®¡ç†æ‰€æµçš„æ³ªç´¯ç§¯å‡ºæ¥çš„ã€‚

### 0x000 å‰è¨€
ç”±ä¸Šä¸€ç‰‡æ–‡ç« [\[å‰ç«¯æ¼«è°ˆ\]ä¸€å·´æŒæ‹å¹³Gitä¸­çš„å„ç§æ¦‚å¿µ](https://juejin.im/post/5c395796518825261e1f012a)ä¸­ï¼Œå¯ä»¥çŸ¥é“ï¼Œ`Git` ä¸–ç•Œå°±åƒä¸€ä¸ª å®‡å®™ï¼Œæ¯ä¸€ä¸ª commit éƒ½æ˜¯ä¸€é¢—æ˜Ÿçƒï¼Œè€Œ `commitId` å°±æ˜¯æ˜Ÿçƒçš„åæ ‡ï¼Œ`branch` æ˜¯ä¸€æ¡æ¡çš„èˆªçº¿ï¼Œç©¿è¿‡æ— æ•°çš„ æ˜Ÿçƒï¼Œ`tag` æ˜¯èˆªçº¿ä¸Šé‡è¦çš„æ˜Ÿçƒï¼Œå¯èƒ½æ˜¯ä¾›ç»™ç«™ï¼Œå¯èƒ½æ˜¯å•†ä¸šä¸­å¿ƒï¼Œè€Œ `HEAD` åˆ™æ˜¯æ¢ç´¢å·é£èˆ¹ï¼Œä¸æ–­å‘å‰æ¢ç´¢ã€‚ä¸­é—´å¯èƒ½ä¼šæœ‰å²”é“ï¼Œä½†æ˜¯æ°¸è¿œæœ‰ä¸€ä¸ªçœŸæ­£çš„æ–¹å‘ç­‰å¾…å‹‡æ•¢çš„èˆ¹é•¿ã€‚

![](https://user-gold-cdn.xitu.io/2019/12/5/16ed677489e062cd?w=526&h=1040&f=png&s=102569)

### 0x001 `merge` è¿˜æ˜¯ `rebase`

`merge` è¿˜æ˜¯ `rebase`ï¼Œè¿™æ˜¯ç»ä¹…ä¸è¡°çš„è®¨è®ºç‚¹ã€‚ä½†æ˜¯è¿™é‡Œæˆ‘ä¸å»äº‰è®ºå­°ä¼˜å­°ç•¥ï¼Œæˆ‘åªè¯´æˆ‘åœ¨ä¸åŒåœºæ™¯çš„å®è·µã€‚

#### 1. merge

æˆ‘é€šå¸¸ä½¿ç”¨ `merge` æ¥å°†å¤šä¸ªåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼Œæ¯”å¦‚è¦å‘å¸ƒçš„æ—¶å€™ï¼Œå°†å¤šä¸ªåŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ°å¸¦å‘å¸ƒåˆ†æ”¯ï¼š

å·²çŸ¥ï¼š`feat/A`ã€`feat/B`ã€`feat/C`ï¼Œæ˜¯ä»ä¸»åˆ†æ”¯æ–°å»ºçš„åŠŸèƒ½åˆ†æ”¯ï¼Œ`feat/B`å’Œ`feat/C`éƒ½ä¿®æ”¹äº†æ–‡ä»¶`1`ã€‚

- æ–°å»ºå¾…å‘å¸ƒåˆ†æ”¯ï¼š
    ```
    # ä»ä¸»åˆ†æ”¯æ–°å»ºåˆ†æ”¯ pub/191205
    $ git checkout -b pub/191205
    Switched to a new branch 'pub/191205'
    ```
- åˆå¹¶`feat/A`åˆ°`pub/191205`ï¼š
    ```shell
    $ git merge feat/A
    Updating 53ab8fd..e443dd4
    Fast-forward
     featA | 1 +
     1 file changed, 1 insertion(+)
     create mode 100644 featA
    ```

`pub/191205` å’Œ `feat/A` éƒ½æ˜¯ä»ä¸»åˆ†æ”¯æ–°å»ºï¼Œæ‰€ä»¥ `pub/191205` æŒ‡å‘çš„ `commit` æ˜¯ `feat/A` çš„ç¥–å…ˆï¼Œå½“æŠŠ `feat/A` åˆå¹¶åˆ°`pub/191205`çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿå¿«é€Ÿåˆå¹¶ï¼ˆFast-forwardï¼‰ã€‚ä¸ä¼šæ–°å»ºä¸€ä¸ªåˆå¹¶èŠ‚ç‚¹ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡`--no-ff(no-fast-forward)`æ¥å¼ºåˆ¶ç”Ÿæˆä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼š

```shell
# æŸ¥çœ‹ log
$ git log --oneline
e443dd4 (HEAD -> pub/191205, feat/A) feat: a
53ab8fd (master) chore: first commit
```

- åˆå¹¶`feat/B`åˆ°`pub/191205`
    ```shell
    $ git merge feat/B
    # è¿›å…¥ vim å¡«å†™åˆå¹¶ä¿¡æ¯
    Merge made by the 'recursive' strategy.
     1     | 2 +-
     featB | 1 +
     2 files changed, 2 insertions(+), 1 deletion(-)
     create mode 100644 featB
    ```

`feat/B`æ˜¯ä»ä¸»åˆ†æ”¯æ–°å»ºçš„åˆ†æ”¯ï¼Œ`pub/191205`åŸæœ¬æŒ‡å‘çš„ä¹Ÿæ˜¯`feat/B`çš„ç¥–å…ˆï¼Œä½†æ˜¯å› ä¸ºå·²ç»å’Œ`feat/A`åˆå¹¶äº†ï¼Œæ‰€ä»¥`pub/191205`ä¸å†æ˜¯`feat/B`çš„ç¥–å…ˆã€‚å› æ­¤ï¼Œ`pub/191205`å’Œ`feat/B`çš„åˆå¹¶ä¸å†æ˜¯å¿«é€Ÿåˆå¹¶ï¼ˆFast-forwardï¼‰ï¼Œè€Œæ˜¯`Merge made by the 'recursive' strategy.`ã€‚ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼š

```shell
$ git log --oneline
5d0ee9b (HEAD -> pub/191205) Merge branch 'feat/B' into pub/191205
d7773d6 (feat/B) feat: b
e443dd4 (feat/A) feat: a
53ab8fd (master) chore: first commit
```

- åˆå¹¶`feat/C`åˆ°`pub/191205`
    ```shell
    $ git merge feat/C
    Auto-merging 1
    CONFLICT (content): Merge conflict in 1
    Automatic merge failed; fix conflicts and then commit the result.
    ```
`feat/C`å’Œ`fix/B`ä¿®æ”¹äº†ç›¸åŒæ–‡ä»¶ï¼Œæ‰€ä»¥äº§ç”Ÿå†²çªï¼Œå› æ­¤ï¼Œä¼šæç¤ºè§£å†³å†²çªã€‚è¿™æ—¶å€™æŸ¥çœ‹çŠ¶æ€ï¼Œå¯ä»¥å‘ç°ï¼Œå¤„äº`you have unmerged paths`çŠ¶æ€ï¼š
    ```
    $ git status
    On branch pub/191205
    You have unmerged paths.
      (fix conflicts and run "git commit")
      (use "git merge --abort" to abort the merge)
    
    Changes to be committed:
    	new file:   featC
    
    Unmerged paths:
      (use "git add <file>..." to mark resolution)
    	both modified:   1
    ```
è¿™æ—¶å€™å¯ä»¥æ‰§è¡Œ`git merge --abort`æ”¾å¼ƒç»§ç»­åˆå¹¶ï¼Œæ¢å¤åˆå¹¶ä¹‹å‰çš„çŠ¶æ€ã€‚ä¹Ÿå¯ä»¥è§£å†³å†²çªä¹‹åï¼Œæ‰§è¡Œ`git merge`ã€‚è¿™é‡Œé€‰æ‹©è§£å†³å†²çªï¼š
    ```
    # è§£å†³å†²çª
    $ git commit
    # è¿›å…¥ vim ç¼–å†™ message
    [pub/191205 98d63aa] Merge branch 'feat/C' into pub/191205
    ```

`feat/C`æ˜¯ä»ä¸»åˆ†æ”¯æ–°å»ºçš„åˆ†æ”¯ï¼Œ`pub/191205`åŸæœ¬æŒ‡å‘çš„ä¹Ÿæ˜¯`feat/C`çš„ç¥–å…ˆï¼Œä½†æ˜¯å› ä¸ºå·²ç»å’Œ`feat/A`ã€`feat/B`åˆå¹¶äº†ï¼Œæ‰€ä»¥`pub/191205`ä¸å†æ˜¯`feat/C`çš„ç¥–å…ˆã€‚å› æ­¤ï¼Œ`pub/191205`å’Œ`feat/C`çš„åˆå¹¶ä¸å†æ˜¯å¿«é€Ÿåˆå¹¶ï¼ˆFast-forwardï¼‰ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼š
    ```
    $ git log --oneline
    98d63aa (HEAD -> pub/191205) Merge branch 'feat/C' into pub/191205
    5d0ee9b Merge branch 'feat/B' into pub/191205
    d7773d6 (feat/B) feat: b
    52dd922 (feat/C) feat: c
    e443dd4 (feat/A) feat: a
    53ab8fd (master) chore: first commit
    ```

å†å²å¦‚ä¸‹ï¼š


![](https://user-gold-cdn.xitu.io/2019/12/5/16ed6948b2bf099f?w=1124&h=1002&f=png&s=112165)

#### 2. rebase
æ³¨ï¼š`rebase` çš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œè¿™é‡Œå…ˆä»‹ç»å’Œ `merge` ç›¸å¯¹åº”çš„åŠŸèƒ½ã€‚

æˆ‘é€šå¸¸ç”¨å®ƒæ¥å’Œä¸»åˆ†æ”¯åŒæ­¥ï¼Œæ¯”å¦‚ä¸€ä¸ªæ–°ç‰ˆæœ¬å‘å¸ƒï¼Œä¸»åˆ†æ”¯æ¯”æˆ‘å½“å‰çš„åŠŸèƒ½åˆ†æ”¯è¶…å‰ï¼Œæˆ‘ä½¿ç”¨`rebase`å°†å½“å‰åˆ†æ”¯å’Œä¸»åˆ†æ”¯â€œåˆå¹¶ï¼ˆå˜åŸºï¼‰â€ã€‚

å·²çŸ¥ï¼š`feat/A`ã€`feat/B` æ˜¯ä»ä¸»åˆ†æ”¯æ–°å»ºï¼Œ`feat/A`å¼€å‘å®Œæˆä¹‹ååˆå¹¶åˆ°ä¸»åˆ†æ”¯ã€‚`feat/B`ç»§ç»­å¼€å‘ï¼Œéœ€è¦å°†`master`çš„åŠŸèƒ½åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Šï¼Œä½¿ç”¨`merge`å¯ä»¥è¿™ä¹ˆåšï¼š
- åˆ‡æ¢åˆ° feat/B
    ```shell
    $ git switch feat/B
    Switched to branch 'feat/B'
    ```
- å°† master åˆå¹¶åˆ° feat/B
    ```shell
    $ git merge master
    # è¿›å…¥ vim ç¼–å†™ message
    Merge made by the 'recursive' strategy.
     featA | 1 +
     1 file changed, 1 insertion(+)
     create mode 100644 featA
    ```
- æŸ¥çœ‹çŠ¶æ€
    ```
    $ git log
    b4f178e (HEAD -> feat/B) Merge branch 'master' into feat/B
    d7773d6 feat: b
    e443dd4 (pub/191205, master, feat/A) feat: a
    53ab8fd chore: first commit
    ```
å› ä¸º`master`åˆå¹¶äº†`feat/A`ï¼Œå› æ­¤ä¸å†æ˜¯`feat/B`çš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œä¸ä¼šè¿›è¡Œå¿«é€Ÿåˆå¹¶ï¼ˆFast-forwardï¼‰ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ã€‚å†å²å¦‚ä¸‹

![](https://user-gold-cdn.xitu.io/2019/12/5/16ed691213b8e3c1?w=892&h=788&f=png&s=80873)

è¿™ä¹ˆåšæ˜¯å¯ä»¥ï¼Œä½†æ˜¯æˆ‘ä¸å–œæ¬¢è¿™ä¸ªåˆå¹¶äº§ç”Ÿçš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©ä½¿ç”¨`rebase`ï¼š
- æ¢å¤åˆ°åˆå¹¶`feat/B`ä¹‹å‰
    ```
    $ git reset e443dd4 --hard
    HEAD is now at e443dd4 feat: a
    ```
- ä½¿ç”¨`rebase`â€œåˆå¹¶ï¼ˆå˜åŸºï¼‰â€`master`
    ```
    $ git rebase master
    git rebase master
    First, rewinding head to replay your work on top of it...
    Applying: feat: b
    ```
- æŸ¥çœ‹å†å²ï¼š
    ```
    $ git log --oneline
    ef3450c (HEAD -> feat/B) feat: b
    e443dd4 (pub/191205, master, feat/A) feat: a
    53ab8fd chore: first commit
    ```
å¯ä»¥å‘ç°æ²¡æœ‰æ–°çš„èŠ‚ç‚¹äº§ç”Ÿï¼Œä½†æ˜¯`rebase`çš„æ“ä½œè¿‡ç¨‹å¹¶ä¸åªæ˜¯ä¸äº§ç”Ÿä¸€ä¸ªåˆå¹¶èŠ‚ç‚¹è€Œå·²ï¼Œå®ƒçš„ä¸­æ–‡ç¿»è¯‘æ˜¯`å˜åŸº`ï¼Œå¬èµ·æ¥å¾ˆ Gay çš„æ ·å­ã€‚ä½†å®ƒçš„æ„æ€æ˜¯â€œæ”¹å˜åŸºç¡€â€ã€‚é‚£æ”¹å˜çš„æ˜¯ä»€ä¹ˆåŸºç¡€å‘¢ï¼Ÿå°±æ˜¯è¿™ä¸ªåˆ†æ”¯`checkout`å‡ºæ¥çš„`commit`ï¼ŒåŸæœ¬`feat/B`æ˜¯ä»`master`ä¸­`checkout`å‡ºæ¥çš„ï¼Œä½†æ˜¯ä½¿ç”¨`git rebase master`ä¹‹åï¼Œå°±ä¼šä»¥`master`æœ€æ–°çš„èŠ‚ç‚¹ä½œä¸º`feat/B`åˆ†æ”¯çš„åŸºç¡€ã€‚å°±åƒ`feat/B`ä¸Šæ‰€æœ‰çš„`commit`éƒ½æ˜¯åŸºäºæœ€æ–°çš„`master`æäº¤çš„ã€‚

å†å²å¦‚ä¸‹ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/5/16ed6a0f442c3c24?w=898&h=780&f=png&s=86252)

ç”±äº`rebase`ä¹‹åï¼Œ`master`å§‹ç»ˆæ˜¯`feat/B`çš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œå› æ­¤ï¼Œä¹‹åå°†`feat/B`åˆå¹¶åˆ°`master`å°†æ‰§è¡Œ`Fast-Farword`ï¼Œä¸ä¼šäº§ç”Ÿå†²çªï¼ˆå¦‚æœæœ‰å†²çªï¼Œ`rebase`çš„æ—¶å€™å°±éœ€è¦è§£å†³äº†ï¼‰ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿæ–°èŠ‚ç‚¹ã€‚

#### 3. merge è¿˜æ˜¯ rebase

`merge`è¿˜æ˜¯`rebase`ï¼Œæœ‰äººæå€¡ä¸è¦ä½¿ç”¨`rebase`ï¼Œåº”è¯¥`rebase`æ”¹å˜äº†å†å²ï¼ˆåœ¨ä¸Šä¸€å°èŠ‚ä¸­ä¸€ç›´åœ¨æ”¹å˜åˆ†æ”¯çš„å¯å§‹èŠ‚ç‚¹ï¼‰ï¼Œæœ‰äººæå€¡ä½¿ç”¨`merge`ï¼Œä¿ç•™å®Œæ•´çš„å†å²ã€‚

æˆ‘æ˜¯è¿™ä¹ˆåšçš„ï¼Œåœ¨ç§æœ‰çš„åˆ†æ”¯ä¸Šï¼Œæˆ‘å§‹ç»ˆä½¿ç”¨`rebase`å°†ä¸»åˆ†æ”¯çš„æ›´æ–°åˆå¹¶åˆ°ç§æœ‰çš„åˆ†æ”¯ä¸Šï¼ˆåé¢è¿˜æœ‰å¾ˆå¤šä½¿ç”¨`rebase`çš„æ“ä½œï¼Œéƒ½æ˜¯åœ¨ç§æœ‰çš„åˆ†æ”¯ï¼Œè¿™é‡Œçš„ç§æœ‰çš„åˆ†æ”¯ï¼ŒæŒ‡çš„æ˜¯åªæœ‰è‡ªå·±ä½¿ç”¨çš„åˆ†æ”¯ï¼Œä¸€æ—¦åˆ†äº«å‡ºå»ï¼Œæˆ–è€…æœ‰äººåŸºäºä½ çš„åˆ†æ”¯å¼€å‘ï¼Œé‚£å°±ä¸å†æ˜¯ç§æœ‰ï¼‰ï¼Œè€Œåœ¨å°†è‡ªå·±çš„åˆ†æ”¯åˆå¹¶åˆ°å…¶ä»–åˆ†æ”¯ï¼ˆä¸»åˆ†æ”¯æˆ–è€…å¾…å‘å¸ƒåˆ†æ”¯ï¼‰ï¼Œåˆ™ä½¿ç”¨`merge`ã€‚

- åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ï¼š
    ```
    $ git switch mater
    Switched to branch 'master'
    ```
- å°†`feat/B` åˆå¹¶åˆ°ä¸»åˆ†æ”¯
    ```
    $ git merge feat/B
    Updating e443dd4..ef3450c
    Fast-forward
     1     | 2 +-
     featB | 1 +
     2 files changed, 2 insertions(+), 1 deletion(-)
     create mode 100644 featB
    ```

è¿™æ ·åœ¨é•¿æ—¶é—´å¼€å‘(`master`ä¸­é—´å‘å¸ƒè¿‡`n`å¤šç‰ˆæœ¬)çš„`feat/B`å°±ä¸ä¼šæœ‰æ— æ•°ä¹±ä¸ƒå…«ç³Ÿçš„åˆ†æ”¯åˆå¹¶ã€‚è€Œåœ¨`master`ä¹Ÿä¸ä¼šå­˜åœ¨`rebase`å¯¼è‡´çš„å†å²å˜æ›´åæœã€‚

å†å²å¦‚ä¸‹ï¼š


![](https://user-gold-cdn.xitu.io/2019/12/5/16ed6b65459f8809?w=444&h=894&f=png&s=59133)

å‡†åˆ™ï¼š**ä¸è¦å¯¹åœ¨ä½ çš„ä»“åº“å¤–æœ‰å‰¯æœ¬çš„åˆ†æ”¯æ‰§è¡Œå˜åŸº**ã€‚

å¦‚æœä½ éµå¾ªè¿™æ¡é‡‘ç§‘ç‰å¾‹ï¼Œå°±ä¸ä¼šå‡ºå·®é”™ã€‚ å¦åˆ™ï¼Œäººæ°‘ç¾¤ä¼—ä¼šä»‡æ¨ä½ ï¼Œä½ çš„æœ‹å‹å’Œå®¶äººä¹Ÿä¼šå˜²ç¬‘ä½ ï¼Œå”¾å¼ƒä½ ã€‚-- [3.6 Git åˆ†æ”¯ - å˜åŸº - å˜åŸºçš„é£é™©](https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA)


### 0x002 å¤šäººåˆä½œå¼€å‘

#### 1. æ–°åŠŸèƒ½å¼€å‘

**å¼€å‘æ–¹å¼**
æ–°åŠŸèƒ½å¼€å‘çš„æ—¶å€™ä»ä¸»åˆ†æ”¯æ–°å»ºæ–°åˆ†æ”¯ï¼Œæ‰€æœ‰è¯¥åŠŸèƒ½çš„å¼€å‘å·¥ä½œéƒ½åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šå®Œæˆã€‚å¦‚æœä¸»åˆ†æ”¯æœ‰æ–°çš„å‘å¸ƒï¼Œä½¿ç”¨`rebase`åŒæ­¥ä¸»åˆ†æ”¯åŠŸèƒ½ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/6/16edb1768e484ec4?w=446&h=992&f=png&s=73493)

**åç§°è§„èŒƒ**
åŠŸèƒ½åˆ†æ”¯çš„å‘½åæ–¹å¼æ˜¯`feat/${name}_${featName}`ï¼Œå®ƒçš„æ„æˆå¦‚ä¸‹ï¼š
- å¸¸é‡`feat`ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯
- å˜é‡`name`ï¼šä½ çš„åå­—
- å˜é‡`featName`ï¼šåŠŸèƒ½åå­—
å¥½å¤„æ˜¯è§åçŸ¥æ„ï¼Œä¸€çœ‹å°±çŸ¥é“æ˜¯åŠŸèƒ½åˆ†æ”¯ï¼Œæ˜¯è°è´Ÿè´£ï¼Œæ˜¯ä»€ä¹ˆåŠŸèƒ½


#### 2. bug ä¿®å¤åŠå…¶å‘å¸ƒ

**å¼€å‘æ–¹å¼**
`bug`ä¿®å¤å¤§ä½“ä¸Šå’Œæ–°åŠŸèƒ½çš„å¼€å‘ç±»ä¼¼ï¼Œä½†æ˜¯`bug`ä¿®å¤ä¸€èˆ¬æ—¶é—´çŸ­ï¼Œç«‹é©¬ä¸Šçº¿ã€‚
`bug`ä¿®å¤ä»ä¸»åˆ†æ”¯æ–°å»ºæ–°åˆ†æ”¯ï¼Œæ‰€æœ‰çš„`bug`ä¿®å¤å·¥ä½œéƒ½åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šå®Œæˆã€‚å¦‚æœä¸»åˆ†æ”¯æœ‰æ–°çš„å‘å¸ƒï¼Œä½¿ç”¨`rebase`åŒæ­¥ä¸»åˆ†æ”¯åŠŸèƒ½ï¼ˆè¿™ä¸ªæ­¥éª¤å…¶å®å’Œæ–°åŠŸèƒ½å¼€å‘ä¸€æ ·ï¼‰ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/6/16edb1eb4c460d9f?w=460&h=958&f=png&s=73919)

**åç§°è§„èŒƒ**
`bug`ä¿®å¤åˆ†æ”¯çš„å‘½åæ–¹å¼æ˜¯`hotfix/${name_${bugName}}`ï¼Œå®ƒçš„æ„æˆå¦‚ä¸‹ï¼š
- å¸¸é‡`hotfix`ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯
- å˜é‡`name`ï¼šä½ çš„åå­—
- å˜é‡`bugName`ï¼š`bug`åå­—
å¥½å¤„æ˜¯è§åçŸ¥æ„ï¼Œä¸€çœ‹å°±çŸ¥é“æ˜¯`bug`ä¿®å¤åˆ†æ”¯ï¼Œæ˜¯è°è´Ÿè´£ï¼Œæ˜¯ä»€ä¹ˆ`bug`

**bug å‘å¸ƒ**
`bug`å‘å¸ƒå¯ä»¥ç›´æ¥æ¨é€åˆ°å¾…å‘å¸ƒç‰ˆæœ¬åˆ†æ”¯ï¼Œæ¯”å¦‚`1.1.1`ï¼Œç„¶å`CodeReview`ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œç„¶ååˆå¹¶ä¸»åˆ†æ”¯éƒ¨ç½²ä¸Šçº¿ã€‚

å®Œæ•´è¿‡ç¨‹å¦‚ä¸‹ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/6/16edb209869268ef?w=448&h=1070&f=png&s=77502)

#### 2.5 stash

ä¸€èˆ¬æˆ‘ä»¬ä¿®å¤`bug`çš„æ—¶å€™éƒ½åœ¨å¼€å‘æ–°åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯åœ¨`feat/*`ä¸Šï¼Œè¿™æ—¶å€™å¦‚ä½•å¿«é€Ÿè¿›å…¥`bug`ä¿®å¤çŠ¶æ€å‘¢ï¼Ÿå¯ä»¥ä¿å­˜å½“å‰ä»£ç ï¼Œæäº¤`commit`ï¼Œä½†æ˜¯è¿™æ—¶å€™ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ï¼Œ1ï¼‰å½“å‰çš„ä»£ç å¹¶æœªå®Œæˆï¼Œå¹¶ä¸æƒ³æäº¤ï¼›2ï¼‰`commit`æœ‰é’©å­ï¼Œæ¯”å¦‚`ESLint`ï¼Œå¿…é¡»ä¿®å¤è¯­æ³•é—®é¢˜æ‰èƒ½æäº¤ã€‚

è¿™æ—¶å€™å°±æ˜¯ä½¿ç”¨`stash`äº†ã€‚`stash`å¯ä»¥å°†å½“å‰å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å†…å®¹æš‚æ—¶ä¿å­˜èµ·æ¥ï¼Œä¹‹åå†ä½¿ç”¨ã€‚

å¦‚ä¸‹ï¼š
- å¼€å‘åŠŸèƒ½ä¸­
    ```
    $ echo "this is a feat" >> feat.txt
    ```
- æ”¶åˆ°`bug`é€šçŸ¥
    ```
    $ git stash
    Saved working directory and index state WIP on master: ef3450c feat: b
    
    $ git switch master
    $ git checkout -b hotfix/bugA
    Switched to a new branch 'hotfix/bugA'
    ```
- ä¿®å¤`bug`ä¹‹å
    ```
    $ git switch feat/A
    $ git stash pop
    On branch hotfix/bugA
    Changes to be committed:
      (use "git restore --staged <file>..." to unstage)
    	new file:   feat.txt
    
    Dropped refs/stash@{0} (32cf119fc1dcbe7088d1a12e290b868d6707526d)
    ```

`stash`å‘½ä»¤æœ‰ä¸€æ•´å¥—å®Œæ•´çš„å¢åˆ æ”¹æŸ¥æŒ‡ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹[git-pro 7.3 Git å·¥å…· - å‚¨è—ä¸æ¸…ç†](https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%82%A8%E8%97%8F%E4%B8%8E%E6%B8%85%E7%90%86)äº†è§£æ›´å¤šã€‚


#### 3. æ–°åŠŸèƒ½å‘å¸ƒ

æ–°åŠŸèƒ½å‘å¸ƒå’Œ`bug`å‘å¸ƒæœ‰äº›ä¸åŒï¼Œ1ï¼‰å¯èƒ½ä¼šæœ‰å¤šä¸ªåŠŸèƒ½å…±åŒå‘å¸ƒï¼Œéœ€è¦æå‰åˆå¹¶ï¼Œé¿å…å¤§å†²çªï¼›2ï¼‰å¯èƒ½æœ‰`bug`ä¿®å¤éœ€è¦æ’é˜Ÿã€‚3ï¼‰å¯èƒ½éœ€è¦ç­‰å¾…åç«¯å‘å¸ƒï¼Œæ—¶é—´é•¿ã€‚

å› ä¸ºï¼ˆ2ï¼‰ï¼Œæ‰€æœ‰æ— æ³•åƒ`bug`å‘å¸ƒé‚£æ ·ç›´æ¥æ¨é€åˆ°ç‰ˆæœ¬åˆ†æ”¯ï¼Œç­‰å¾…å‘å¸ƒã€‚å› ä¸ºåœ¨çœŸæ­£å‘å¸ƒä¹‹å‰ï¼Œæ˜¯æ— æ³•çŸ¥é“å‡†ç¡®ç‰ˆæœ¬çš„ã€‚

å› ä¸ºï¼ˆ1ï¼‰ã€ï¼ˆ3ï¼‰ï¼Œæ‰€ä»¥éœ€è¦æå‰åˆå¹¶ï¼Œæ‰€ä»¥å¼•å…¥ä¸€ä¸ªâ€œæ—¥æœŸåˆ†æ”¯â€çš„æ¦‚å¿µï¼Œå³ä»¥æ—¥æœŸä¸ºåˆ†æ”¯åï¼Œæ¯”å¦‚`pub/191205`ã€‚

æ‰€ä»¥å‘å¸ƒè¿‡ç¨‹å¦‚ä¸‹ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/6/16edb4372a5e19d2?w=1218&h=1282&f=png&s=153896)


(å…¶å®æˆ‘è¿˜ç”»äº†ä¸€å¼ è´¼å¤æ‚çš„å›¾ï¼ŒæŠŠè‡ªå·±éƒ½æ¶å¿ƒäº†ï¼Œæœ‰ç©ºè¿˜æ˜¯ç”»ä¸ªåŠ¨æ€å›¾å§ï¼ˆæ²¡ç©ºï¼‰)

![](https://user-gold-cdn.xitu.io/2019/12/6/16edb44bd94d1ba9?w=1204&h=1230&f=png&s=226744)

### 0x003 æ ‡å‡†åŒ– commit message
æ ‡å‡†åŒ– commit message å¯ä»¥å‚è€ƒ[é˜®ä¸€å³° - Commit message å’Œ Change log ç¼–å†™æŒ‡å—](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)ã€‚ï¼ˆé˜®ä¸€å³°çœŸçš„æ˜¯å†™åšå®¢è·¨ä¸è¿‡å»çš„åğŸ˜¢ï¼Œå†™å•¥éƒ½å¯ä»¥å¼•ç”¨ä»–ï¼‰

1. å®‰è£…`commitizen`
```
$ npm install -g commitizen
```
2. åœ¨é¡¹ç›®ç›®å½•ä¸­åˆå§‹åŒ–`commitizen`
```
$ commitizen init cz-conventional-changelog --save --save-exact
```
3. ä½¿ç”¨`git cz`ä»£æ›¿`git commit`ï¼Œä»¥ä¸‹æ˜¯æˆ‘å¸¸ç”¨çš„ç±»å‹ï¼š
```
$ git cz
feat:       ä¸€ä¸ªæ–°åŠŸèƒ½
fix:        ä¸€ä¸ª bug ä¿®å¤
docs:       åªæ”¹å˜æ–‡æ¡£
refactor:   æ”¹å˜ä»£ç ä½†æ˜¯ä¸æ·»åŠ æˆ–è€…ä¿®å¤åŠŸèƒ½ï¼Œæˆ‘ä¸€èˆ¬ç”¨äºä¼˜åŒ–æˆ–è€…é‡æ„
test:       æ·»åŠ æµ‹è¯•ä»£ç 
chore:      å…¶ä»–æ”¹å˜
style:      æ ·å¼æ›´æ–°
```

### 0x004 commit ç²¾ç»†åŒ–ç®¡ç†

é¦–å…ˆæ˜¯ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç®¡ç†`commit`ï¼Œ`commit`æœ‰å•¥å¥½ç®¡ç†çš„ï¼Ÿ

åœ¨ä»¥å‰ï¼Œæˆ‘è§‰å¾—`git`æ˜¯ç”¨æ¥è®°å½•ä»£ç æ“ä½œçš„ï¼Œæˆ‘å¯¹ä»£ç çš„ä»»ä½•æ“ä½œéƒ½åº”è¯¥è¢«è®°å½•ä¸‹æ¥ï¼Œè€Œä¸”å°±åƒå†å²ä¸€æ ·ï¼Œæ˜¯ç¥åœ£ä¸å¯ä¾µçŠ¯çš„ã€‚é€šè¿‡`git`å†å²ï¼Œæˆ‘å¿…é¡»è¦å¯ä»¥çŸ¥é“æˆ‘åœ¨æŸä¸€åˆ»åšäº†ä»€ä¹ˆï¼Œå°±ç®—æˆ‘åœ¨ä¸€ä¸ª`commit`æ·»åŠ äº†ä¸€è¡Œä»£ç ï¼Œç„¶ååœ¨åä¸€ä¸ª`commit`åˆ é™¤äº†å®ƒï¼Œæˆ‘ä¹Ÿå¿…é¡»å¯ä»¥ä»`log`ä¸­çœ‹å‡ºæ¥ã€‚

æ‰€ä»¥æˆ‘çš„`git`å†å²ä¸­å……æ»¡äº†å„ç§æ— æ•ˆçš„`commit`ï¼Œå› ä¸ºæœ‰æ—¶å€™çœŸçš„ä¸çŸ¥é“å¦‚ä½•ä¸ºå‘½åã€‚

ä½†æ˜¯åæ¥ï¼Œæˆ‘å°±æƒ³é€šäº†ï¼Œæˆ‘ä½¿ç”¨`git`çš„ç›®æ ‡æ˜¯ä¸æ˜¯ä¸ºäº†è®°å½•ï¼Œè€Œæ˜¯ä¸ºäº†é¡¹ç›®çš„ç¨³å®šå‘å±•ã€‚åªè¦å®ç°äº†è¿™ä¸ªç›®çš„ï¼Œæ‰‹æ®µä¸æ˜¯é—®é¢˜ï¼Œæ›´ä½•å†µ`git`åªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå·¥å…·æ˜¯ç”¨æ¥ç”¨çš„ï¼Œä¸æ˜¯ç”¨æ¥ä¾›å¥‰çš„ã€‚è®©è‡ªå·±å¿«ä¹å¿«ä¹æ‰å«åšæ„ä¹‰ã€‚

æ‰€è°“çš„ç®¡ç†`commit`ï¼Œå°±æ˜¯å¯¹`commit`æ‰§è¡Œå¢ã€åˆ ã€æ”¹ã€æ‹†æ“ä½œã€‚ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸€ä¸€åˆ—å‡ºã€‚è€Œç®¡ç†çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è®©æ¯ä¸€ä¸ª`commit`éƒ½æœ‰å­˜åœ¨çš„æ„ä¹‰ï¼Œè®©`Git`æˆä¸ºé¡¹ç›®ç®¡ç†çœŸæ­£çš„åç›¾ã€‚

åé¢çš„ä¾‹å­å°†åŒæ—¶æä¾›`SourceTree`çš„æ“ä½œï¼Œå‘½ä»¤å¼å¯ä»¥çœ‹ä¸Šä¸€ç¯‡æ–‡ç« [\[å‰ç«¯æ¼«è°ˆ\]ä¸€å·´æŒæ‹å¹³Gitä¸­çš„å„ç§æ¦‚å¿µ](https://juejin.im/post/5c395796518825261e1f012a)ã€‚

#### 1. æ’åº commit
åœºæ™¯ï¼šå®Œæˆç™»é™†é¡µé¢ä¹‹åï¼Œæäº¤ä¸€ä¸ª`commit`ï¼Œ`message`æ˜¯`feat(ç™»é™†): å®Œæˆç™»é™†é¡µé¢`ã€‚ç„¶åè¿›å…¥å…¶ä»–åŠŸèƒ½çš„å¼€å‘ï¼Œä¹‹ååˆå›åˆ°ç™»é™†é¡µé¢çš„å¼€å‘ã€‚æäº¤è®°å½•å¦‚ä¸‹ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/7/16edf03cfad7caa6?w=1238&h=334&f=png&s=82049)

æˆ‘ä»¬æœ‰ä¸¤ä¸ª`feat(ç™»é™†)`æˆ–è€…å¤šä¸ªç›¸å…³çš„çš„`commit`ï¼Œä½†æ˜¯å´åˆ†å¸ƒäºä¸åŒçš„åœ°æ–¹ï¼Œå‡è®¾æ¯ä¸€ä¸ª`feat(ç™»é™†)`åªä¼šä¸å‰ä¸€ä¸ª`feat(ç™»é™†)`æœ‰æ–‡ä»¶ä¿®æ”¹çš„äº¤é›†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸Œæœ›`feat(ç™»é™†)`ç›¸å…³çš„åŠŸèƒ½å¯ä»¥æ”¾åœ¨ä¸€èµ·ã€‚å¦‚ä¸‹ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/7/16edf0547a4990b8?w=1022&h=330&f=png&s=79595)

å¦‚ä½•å®ç°ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/7/16edf3a1a97da11d?w=1404&h=992&f=gif&s=2442320)


#### 2. åˆå¹¶ commit
åœºæ™¯ï¼šå®Œæˆç™»é™†é¡µé¢ä¹‹åï¼Œæäº¤ä¸€ä¸ª`commit`ï¼Œ`message`æ˜¯`feat(ç™»é™†): å®Œæˆç™»é™†é¡µé¢`ã€‚ç„¶åè¿›å…¥å…¶ä»–åŠŸèƒ½çš„å¼€å‘ï¼Œåæ¥å‘ç°ç™»é™†æœ‰ä¸€ä¸ªæ–‡æ¡ˆé”™è¯¯ï¼Œç»§ç»­ä¿®æ”¹ï¼Œå®Œæˆä¹‹ååˆæäº¤ä¸€ä¸ª`commit`ï¼Œ`message`ä¸º`feat(ç™»é™†): ä¿®æ”¹æ–‡æ¡ˆ`ã€‚æäº¤è®°å½•å¦‚ä¸‹ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/7/16edf22b6231f2f2?w=1280&h=360&f=png&s=84521)

åœ¨æˆ‘çœ‹æ¥ï¼Œ`feat(ç™»é™†): ä¿®æ”¹æ–‡æ¡ˆ`è¿™ä¸ª`commit`çš„å­˜åœ¨æ˜¯ä¸åº”è¯¥çš„ï¼Œæ¯”å¦‚ï¼Œ1ï¼‰å¦‚æœæœ‰ä¸€å¤©æˆ‘ä»¬éœ€è¦å•ç‹¬ä¸Šâ€œç™»é™†â€åŠŸèƒ½ï¼Œè¿˜æœ‰å¯èƒ½è¢«é—æ¼ï¼›2ï¼‰å•ç‹¬å æ®ä¸€ä¸ª`commit`å¯èƒ½åªæ˜¯ä¸ºäº†ä¿®å¤ä¸€ä¸ªç¬¦å·é—®é¢˜ï¼Œåœ¨å›æº¯å†å²çš„æ—¶å€™æœ‰ä¸å¿…è¦çš„æµªè´¹ã€‚ä¹Ÿå°±æ˜¯æˆ‘å¸Œæœ›ä¸€ä¸ª`commit`å®ƒæ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¾èµ–åç»­`commit`çš„å­˜åœ¨ã€‚

æ‰€ä»¥æˆ‘å¸Œæœ›å°†è¿™ä¸¤ä¸ª`commit`åˆå¹¶ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/7/16edf38157688d94?w=1278&h=280&f=png&s=67757)

æ“ä½œè¿‡ç¨‹ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/7/16edf38ae5ca01bd?w=1404&h=992&f=gif&s=4688159)

#### 3. æ›´æ–° commit

æ›´æ–°`commit`çš„åœºæ™¯æœ‰ä¸¤ä¸ªï¼š
1. æ›´æ–°`message`
    - æ­£å¥½ä¸Šé¢æœ‰ä¸€ä¸ªä¸ç¬¦åˆæ ‡å‡†çš„`message`:
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf4714e5d03d0?w=1276&h=272&f=png&s=68011)
    - æˆ‘å¸Œæœ›æ”¹ä¸ºï¼š
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf4b622541f2d?w=1278&h=252&f=png&s=67379)
    - æ“ä½œè¯´æ˜
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf4bb49a69508?w=1342&h=948&f=gif&s=1526061)
2. æ›´æ–°ã€æ·»åŠ ã€åˆ é™¤
    - 1ï¼‰æœ‰æ—¶å€™æˆ‘ä»¬ä¼šé€šè¿‡ä¿®æ”¹æŸä¸ªå˜é‡æ¥åšä¸€äº›æµ‹è¯•ï¼Œç„¶åæäº¤çš„æ—¶å€™çªç„¶å‘ç°å¿˜è®°æ”¹å›æ¥ï¼›2ï¼‰å¿˜è®°æˆ–è€…è¯¯æ·»åŠ æ–‡ä»¶ï¼›3ï¼‰å¿˜è®°åˆ é™¤æ–‡ä»¶ã€‚è¿™æ—¶å€™å¯ä»¥é€šè¿‡å†åˆ›å»ºä¸€ä¸ª`commit`å†æ”¹å›æ¥ï¼Œä½†æ˜¯è¯¯æ·»åŠ çš„æ–‡ä»¶ä¾æ—§ä¼šåœ¨å†å²ä¸­å­˜åœ¨ï¼Œå æ®ä¸€å®šçš„ç©ºé—´ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸Šé¢çš„â€œåˆå¹¶â€æ–¹å¼åˆå¹¶`commit`æ¶ˆé™¤å½±å“ï¼Œä¹Ÿå¯ä»¥ä¸€æ­¥åˆ°ä½ï¼š
    - `feat(mine): ä¸ªäººä¸­å¿ƒ`æäº¤ä¸­æœ‰ä¸€ä¸ª`mime.html`æ–‡ä»¶ï¼Œæˆ‘å¸Œæœ›åˆ æ‰`bad line`ï¼›è¿˜æœ‰ä¸€ä¸ª`mineBad.bad`è¿™ä¹ˆä¸€ä¸ªçœ‹èµ·æ¥ååçš„æ–‡ä»¶ï¼Œæˆ‘å¸Œæœ›åˆ é™¤å®ƒã€‚
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf5aaf953830b?w=1770&h=1250&f=png&s=731638)    
    - æ“ä½œè¿‡ç¨‹ï¼ˆç•¥å¤æ‚ï¼‰:
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf676a6ddd303?w=1342&h=948&f=gif&s=3526906)

#### 4. å¢åŠ /åˆ†ç¦» commit

1. å¢åŠ ä¸€ä¸ª`commit`çš„æ„ä¹‰å…¶å®ä¸å¤§ï¼Œåœ¨æ›´æ–°`commit`çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬é€‰æ‹©çš„æ˜¯`æ›´æ­£ä¸Šä¸€æ¬¡æäº¤`ï¼Œä¹Ÿå°±æ˜¯`git commit --amend`ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸é€‰æ‹©ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªæäº¤ï¼Œå…¶å®å°±æ˜¯å¢åŠ ä¸€ä¸ª`commit`äº†ã€‚
    - æˆ‘å¸Œæœ›åœ¨`feat(mine): å®Œæˆä¸ªäººä¸­å¿ƒ`å’Œ`feat(main): å®Œæˆä¸»é¡µ`ä¸­é—´æ·»åŠ ä¸€ä¸ª`commit`ï¼Œå¯ä»¥é€šè¿‡æ–°å»ºä¸€ä¸ª`commit`ç„¶åä¹‹åé€šè¿‡å‰é¢çš„`æ’åº`æ‰‹æ®µæ¥åšåˆ°ï¼Œä¹Ÿå¯ä»¥ä¸€æ­¥åˆ°ä½ï¼š
    
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf6bb25577ad6?w=1286&h=268&f=png&s=69965)
    - æ“ä½œè¿‡ç¨‹ï¼ˆå’Œå‰é¢å·®ä¸å¤šï¼Œåªæ˜¯ä¸é€‰æ‹©æ›´æ­£ä¸Šä¸€æ¬¡æäº¤ï¼‰ï¼š
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf768b80ad4dc?w=1351&h=955&f=gif&s=4292963)

2. åˆ†ç¦»`commit`çš„æ„ä¹‰é‡å¤§ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›åªå‘å¸ƒä¸€ä¸ªåŠŸèƒ½ï¼Œå´å‘ç°è¿™ä¸ªåŠŸèƒ½çš„`commit`ä¸­åŒ…å«æˆ‘ä»¬ä¸å¸Œæœ›å‘å¸ƒçš„å¦ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯èƒ½æ˜¯å› ä¸ºæœ¬æ¥è¦æ”¾åˆ°ä¸¤ä¸ª`commit`çš„åŠŸèƒ½è¯¯æ·»åŠ åˆ°ä¸€ä¸ª`commit`ï¼Œ
    - æˆ‘ä»¬æœ‰ä¸€ä¸ª`feat(detail): å®Œæˆè¯¦æƒ…é¡µ`çš„`commit`ï¼Œå´ä¸å°å¿ƒæŠŠ`other`çš„åŠŸèƒ½ç»™åŒ…å«è¿›å»äº†ï¼Œè¿™æ—¶å€™æˆ‘å¸Œæœ›åªå‘å¸ƒ`detail`é¡µé¢ï¼Œå› æ­¤ï¼Œå¯¹äº`commit`çš„åˆ†ç¦»æ˜¯å¿…é¡»çš„ï¼š

    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf82a488740e6?w=1770&h=1250&f=png&s=713635)
    
    - æ“ä½œè¿‡ç¨‹
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf9ed42f92d38?w=1760&h=1244&f=gif&s=5030731)
#### 5. åˆ é™¤ commit

å½“æˆ‘ä»¬åšäº†ä¸€æ¬¡ä¿®æ”¹åæ¥å‘ç°è¿™ä¸ªä¿®æ”¹æ²¡æœ‰å¿…è¦ï¼Œå°±å¯ä»¥åˆ é™¤è¿™ä¸ª`commit`ï¼Œä½†æ˜¯ä¸æ¨èï¼Œé™¤éçœŸçš„ç¡®è®¤ã€‚
- åœ¨`feat(detail): å®Œæˆè¯¦æƒ…é¡µé¢`åé¢åšäº†ä¸€ä¸ªä¸éœ€è¦çš„æäº¤ï¼š
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf9be193a7187?w=1770&h=1250&f=png&s=744855)

- åˆ é™¤æ­¥éª¤
    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edf9fdcc03a779?w=1760&h=1244&f=gif&s=2794303)

#### 7. cherry-pick

æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å‘å¸ƒä¸€ä¸ªåˆ†æ”¯ä¸­çš„å‡ ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ä¸€æ¬¡ç»Ÿä¸€ä¼˜åŒ–ä¸­ä¿®å¤äº† 5 ä¸ª bugï¼Œåšäº† 5 ä¸ªä¼˜åŒ–ï¼Œä½†æ˜¯å…¶ä¸­å‡ ä¸ªå¹¶æ²¡æœ‰é€šè¿‡éªŒè¯ï¼š

- `refactor/A` åˆ†æ”¯ä¸­æœ‰  3 ä¸ªcommitï¼Œé€šè¿‡äº† 2ï¼ˆç”¨ ok æ ‡è®°ï¼‰ ä¸ª
    
    ![](https://user-gold-cdn.xitu.io/2019/12/9/16ee663fbbcd1c9e?w=1274&h=362&f=png&s=78515)

- `fix/A` åˆ†æ”¯ä¸­æœ‰ 3 ä¸ª commitï¼Œé€šè¿‡äº† 2ï¼ˆç”¨ ok æ ‡è®°ï¼‰ ä¸ª
    ![](https://user-gold-cdn.xitu.io/2019/12/9/16ee664c7d6475c3?w=1276&h=360&f=png&s=72370)

æˆ‘ä»¬åªèƒ½å‘å¸ƒé€šè¿‡çš„ bug ä¿®å¤å’Œä¼˜åŒ–ï¼ˆæ ‡æ³¨äº† ok çš„ï¼‰ï¼Œè€Œè¿™äº›ä¿®å¤å’Œä¼˜åŒ–å¹¶ä¸ä¸€å®šåœ¨å“ªä¸ªåˆ†æ”¯ï¼Œæ˜¯éšæœºåˆ†å¸ƒçš„ï¼š

![](https://user-gold-cdn.xitu.io/2019/12/9/16ee6655e6bc1f52?w=1270&h=374&f=png&s=86123)

åœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œè™½ç„¶å¯ä»¥ç”¨åˆ†æ”¯å»å¤„ç†ï¼Œä½†æ˜¯æœ‰ç‚¹éº»çƒ¦ï¼Œè¿™ä¸ªæ—¶å€™ cherry-pick æ˜¯æœ€å¥½çš„å·¥å…·ã€‚
- æ“ä½œè¿‡ç¨‹
    
    ![](https://user-gold-cdn.xitu.io/2019/12/9/16ee6663319b8763?w=1760&h=1244&f=gif&s=3801658)

### 0x005 reflog
ä¸Šé¢çš„å¾ˆå¤šæ“ä½œéƒ½æ¶‰åŠåˆ°å†å²çš„æ“ä½œï¼Œç”¨æ™®é€šçš„ revert æˆ–è€… reset æ˜¯æ— æ³•æ¶ˆé™¤å½±å“çš„ï¼Œåªæœ‰åœ¨æ¸…æ¥šè¿™äº›å‘½ä»¤çš„åŸç†å’Œæœ¬è´¨çš„æƒ…å†µä¸‹æ‰åº”è¯¥ä½¿ç”¨è¿™äº›å‘½ä»¤ã€‚ä½†æ˜¯å¯¹äºè¿™äº›æ“ä½œä¹Ÿæ˜¯æœ‰åŠæ³•å¤„ç†çš„ï¼Œé‚£å°±æ˜¯ `reflog`ï¼š

åœ¨`git`ä¸­ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œæ¯”å¦‚`åˆ‡æ¢åˆ†æ”¯`ã€`åˆå¹¶åˆ†æ”¯`ç­‰ï¼Œå¯ä»¥ä½¿ç”¨ `reflog`æŸ¥çœ‹è¿™ä¸ªè®°å½•ï¼Œä¸‹é¢æ˜¯`cherry-pick`ä¾‹å­äº§ç”Ÿçš„è®°å½•ï¼š
```
$ git reflog
# æ‰§è¡Œ cherry-pickï¼Œä¸€å…± 4 ä¸ª commit
b185e09 (HEAD -> pub/191206) HEAD@{0}: cherry-pick: feat(A): ok
dd67bf5 HEAD@{1}: cherry-pick: fix(A): ok
1d0237e HEAD@{2}: cherry-pick: feat(A): ok
51f808e HEAD@{3}: cherry-pick: refactor(A): ok
### ä» master æ–°å»ºåˆ†æ”¯ pub/191206
a48cdd2 (master) HEAD@{4}: checkout: moving from master to pub/191206
```

![](https://user-gold-cdn.xitu.io/2019/12/7/16edfbea83843837?w=1288&h=658&f=png&s=148098)

å¦‚æœæˆ‘ä»¬æ’¤é”€`cherry-pick`ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```
$ git reset --hard HEAD@{4}
HEAD is now at a48cdd2 chore: é¡¹ç›®åˆå§‹åŒ–
```
- å°±æ²¡å•¦
![](https://user-gold-cdn.xitu.io/2019/12/7/16edfbf94bd6a838?w=1276&h=536&f=png&s=108387)
- å†æ¬¡æŸ¥çœ‹`reflog`ï¼Œå¤šäº†ä¸€æ¡è®°å½•
    ```
    $ git reflog
    a48cdd2 (HEAD -> pub/191206, master) HEAD@{0}: reset: moving to HEAD@{4}
    b185e09 HEAD@{1}: cherry-pick: feat(A): ok
    dd67bf5 HEAD@{2}: cherry-pick: fix(A): ok
    1d0237e HEAD@{3}: cherry-pick: feat(A): ok
    51f808e HEAD@{4}: cherry-pick: refactor(A): ok
    a48cdd2 (HEAD -> pub/191206, master) HEAD@{5}: checkout: moving from master to pub/191206
    ```
- æ’¤é”€`cherry-pick`åˆåæ‚”å•¦
    ```
    $ git reset --hard HEAD@{1}
    HEAD is now at b185e09 feat(A): ok
    ```
- æ•ˆæœ

    ![](https://user-gold-cdn.xitu.io/2019/12/7/16edfc1bb3507750?w=1278&h=668&f=png&s=149821)

- åˆåˆåæ‚”å•¦ï¼ï¼ï¼æ»š

### 0x006 æ€»ç»“

1. å‹¿å¿˜åˆå¿ƒï¼Œç ¥ç ºå‰è¡Œã€‚æˆ‘ä»¬ä¸€å¼€å§‹ä½¿ç”¨`git`æ˜¯ä¸ºäº†æ›´å¥½çš„è¾…åŠ©é¡¹ç›®ï¼Œè€Œä¸æ˜¯è®©é¡¹ç›®æ›´åŠ å¤æ‚ï¼Œå¦‚æœä¸ä½¿ç”¨è¿™äº›æ–¹å¼å¯ä»¥è®©ä½ çš„é¡¹ç›®æ›´åŠ ç®€å•ï¼Œé‚£å°±ä¸è¦ç”¨ï¼Œä¸ºäº†ä½¿ç”¨`git`è€Œä½¿ç”¨`git`ï¼Œä¸å¦‚ä¸ä½¿ç”¨ã€‚

2. è¦ç†è§£å·¥å…·çš„åŸç†ï¼Œå†å»ä½¿ç”¨ï¼Œä¸è¦ç›²ç›®ã€‚ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤ä¹‹å‰ï¼ŒåŠ¡å¿…äº†è§£è¿™äº›å‘½ä»¤æˆ–è€…æ“ä½œèƒŒåå‘ç”Ÿäº†ä»€ä¹ˆã€‚


### 0x007 åè®°

- æˆ‘ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ç§å¥½çš„è¡¨è¾¾æ–¹å¼ï¼Œä»æˆªå›¾æ ‡æ³¨ã€ç»˜å›¾ï¼Œåˆ° `gif` ç­‰ï¼Œå¸Œæœ›å¯ä»¥å°†æ–‡ç« è®²çš„æ›´åŠ é€å½»ã€‚ç°åœ¨çœ‹æ¥ï¼Œå¯èƒ½è¿˜æ˜¯ `gif` æ¯”è¾ƒå¥½ã€‚

- å†™ä¸€ç¯‡æ–‡ç« çœŸçš„æœ‰ç‚¹éš¾å•Šï¼Œæ„æ€ã€å¸ƒå±€ã€å®éªŒã€æ€»ç»“ï¼Œæ¯ä¸€æ­¥éƒ½éœ€è¦èŠ±å¾ˆå¤§çš„åŠŸå¤«ï¼Œä½†æ˜¯ä¸€ç¯‡ç²¾å¿ƒæ€»ç»“çš„æ–‡ç« ï¼Œå¯¹è‡ªå·±çš„å¸®åŠ©è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œå¸Œæœ›å¯¹å„ä½ä¹Ÿæœ‰å¸®åŠ©æŠŠã€‚

### 0x008 èµ„æº

- [git pro](https://git-scm.com/book/zh/v2)
- [é˜®ä¸€å³° - Commit message å’Œ Change log ç¼–å†™æŒ‡å—](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)
- [\[å‰ç«¯æ¼«è°ˆ\]ä¸€å·´æŒæ‹å¹³Gitä¸­çš„å„ç§æ¦‚å¿µ](https://juejin.im/post/5c395796518825261e1f012a)
- [SourceTree](https://www.sourcetreeapp.com/)ï¼šGit å¯è§†åŒ–å·¥å…·
- [ProcessOn](https://www.processon.com/)ï¼šç»˜å›¾å·¥å…·
- [æˆªå›¾](https://apps.apple.com/cn/app/%E6%88%AA%E5%9B%BE-jietu-%E5%BF%AB%E9%80%9F%E6%A0%87%E6%B3%A8-%E4%BE%BF%E6%8D%B7%E5%88%86%E4%BA%AB%E7%9A%84%E6%88%AA%E5%B1%8F%E5%B7%A5%E5%85%B7/id1059334054?mt=12)ï¼šæˆªå›¾å’Œæ ‡æ³¨
- [GIF Brewery 3 by Gfycat](https://apps.apple.com/cn/app/gif-brewery-3-by-gfycat/id1081413713?mt=12)ï¼šGIF å½•åˆ¶å’Œæ ‡æ³¨å·¥å…·
- [IDEA](http://www.jetbrains.com/idea/)ï¼šIDE

### 0x009 å¸¦è´§

æœ€è¿‘å‘ç°ä¸€ä¸ªå¥½ç©çš„åº“ï¼Œä½œè€…æ˜¯ä¸ªå¤§ä½¬å•Š--[åŸºäº React çš„ç°è±¡çº§å¾®åœºæ™¯ç¼–è¾‘å™¨](https://juejin.im/post/5db718b7f265da4d1e26cb9c)ã€‚

![](https://user-gold-cdn.xitu.io/2019/10/30/16e189057e12e6f8?imageslim)


---
